import { existsSync } from "node:fs";
import { resolve } from "node:path";
import { execa } from "execa";

//#region src/lib/editors.ts
/**
* Gets VS Code's global config directory based on the platform
*/
function getVSCodeGlobalConfigDir(homeDir) {
	const platform = process.platform;
	if (platform === "darwin") return resolve(homeDir, "Library", "Application Support", "Code", "User");
	if (platform === "linux") return resolve(homeDir, ".config", "Code", "User");
	if (platform === "win32") {
		const appData = process.env.APPDATA;
		if (appData) return resolve(appData, "Code", "User");
	}
	return null;
}
/**
* Checks if Claude CLI is installed
*/
async function isClaudeCLIInstalled() {
	try {
		await execa("claude", ["--version"], {
			stdio: "ignore",
			timeout: 5e3
		});
		return true;
	} catch {
		return false;
	}
}
/**
* Detects which editors are installed on the system
*/
async function detectAvailableEditors(homeDir) {
	const editors = [];
	if (existsSync(resolve(homeDir, ".cursor"))) editors.push("Cursor");
	const vscodeGlobalDir = getVSCodeGlobalConfigDir(homeDir);
	if (vscodeGlobalDir && existsSync(vscodeGlobalDir)) editors.push("VS Code");
	if (await isClaudeCLIInstalled()) editors.push("Claude CLI");
	return editors;
}

//#endregion
export { detectAvailableEditors, getVSCodeGlobalConfigDir };
//# sourceMappingURL=editors.js.map